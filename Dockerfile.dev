FROM node:20-alpine

# Work inside the web app folder
WORKDIR /app/apps/web

# Package manager
RUN npm install -g pnpm

# Install deps for the web app (no app-level lockfile)
COPY apps/web/package.json ./
RUN pnpm install --no-frozen-lockfile

# Bring in the rest of the repo (so TS base config etc. are visible)
WORKDIR /app
COPY . .
WORKDIR /app/apps/web

# Vite dev server
EXPOSE 5173
CMD ["pnpm", "dev", "--host"]

